514b21e96e3a49eb1dcd670d6ec6f8c8
"use strict";

var _jestCucumber = require("jest-cucumber");
var _react = require("@testing-library/react");
var _Base = _interopRequireDefault(require("../../Base"));
var _react2 = _interopRequireDefault(require("react"));
require("text-encoding");
var _reactRedux = require("react-redux");
var _toolkit = require("@reduxjs/toolkit");
var _cartSlice = _interopRequireDefault(require("../../redux/reducer/cartSlice"));
var _testUtils = require("react-dom/test-utils");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const feature = (0, _jestCucumber.loadFeature)("src/components/features/base.feature");
let store;
let screen;
(0, _jestCucumber.defineFeature)(feature, test => {
  beforeEach(() => {
    store = (0, _toolkit.configureStore)({
      reducer: {
        cart: _cartSlice.default
      }
    });
    screen = (0, _react.render)( /*#__PURE__*/_react2.default.createElement(_reactRedux.Provider, {
      store: store
    }, /*#__PURE__*/_react2.default.createElement(_Base.default, null)));
  });
  test("Adding a new item to the cart", ({
    given,
    when,
    then,
    and
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeTruthy();
    });
    when('the user clicks the "Add New Item" button', () => {
      const itemQuantity = screen.getByText("5");
      expect(itemQuantity).toBeTruthy();
      const addCart = screen.getByRole("button", {
        name: "add-to-cart"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(addCart);
      });
    });
    then("a new item should be added to the cart", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("6");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Deleting an item from the cart", ({
    given,
    when,
    then,
    and
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Delete" button for an item', async () => {
      const itemQuantity = screen.getByText("5");
      expect(itemQuantity).toBeTruthy();
      const removeCart = screen.getAllByRole("button", {
        name: "remove-cart-button"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(removeCart[4]);
      });
    });
    then("the total quantity should decrease by the quantity of the deleted item", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("4");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Removing an item from the cart", ({
    given,
    when,
    then,
    and
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Remove" button for an item', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      const decreaseQuantity = screen.getAllByRole("button", {
        name: "decrease-item-quantity"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(decreaseQuantity[4]);
      });
    });
    then("the total quantity should decrease by 1", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("Zero");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Adding an item to the cart", ({
    given,
    when,
    then
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Add to Cart" button for an item', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      expect(itemQuantity[0]).toBeTruthy();
      const increaseQuantity = screen.getAllByRole("button", {
        name: "increase-item-quantity"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(increaseQuantity[0]);
      });
    });
    then("the total quantity should increase by 1", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("2");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Resetting the cart counter", ({
    given,
    when,
    then
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Reset Counter" button', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      expect(itemQuantity[0]).toBeTruthy();
      const resetQuantity = screen.getByRole("button", {
        name: "reset-button"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(resetQuantity);
      });
    });
    then("the total quantity should be set to 0", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getAllByText("0");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Removing all items from the cart", ({
    given,
    when,
    then
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Remove All Items" button', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      expect(itemQuantity[0]).toBeTruthy();
      const removeAllButton = screen.getByRole("button", {
        name: "remove-all-button"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(removeAllButton);
      });
    });
    then("the cart should be empty", async () => {
      await (0, _react.waitFor)(() => {
        try {
          screen.getByTestId("items-container");
          expect(true).toBeFalsy();
        } catch (error) {
          expect(error).toBeDefined();
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfamVzdEN1Y3VtYmVyIiwicmVxdWlyZSIsIl9yZWFjdCIsIl9CYXNlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9yZWFjdDIiLCJfcmVhY3RSZWR1eCIsIl90b29sa2l0IiwiX2NhcnRTbGljZSIsIl90ZXN0VXRpbHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImZlYXR1cmUiLCJsb2FkRmVhdHVyZSIsInN0b3JlIiwic2NyZWVuIiwiZGVmaW5lRmVhdHVyZSIsInRlc3QiLCJiZWZvcmVFYWNoIiwiY29uZmlndXJlU3RvcmUiLCJyZWR1Y2VyIiwiY2FydCIsImNhcnRTbGljZSIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImdpdmVuIiwid2hlbiIsInRoZW4iLCJhbmQiLCJleHBlY3QiLCJ0b0JlVHJ1dGh5IiwiaXRlbVF1YW50aXR5IiwiZ2V0QnlUZXh0IiwiYWRkQ2FydCIsImdldEJ5Um9sZSIsIm5hbWUiLCJhY3QiLCJmaXJlRXZlbnQiLCJjbGljayIsIndhaXRGb3IiLCJ0b0JlRGVmaW5lZCIsInJlbW92ZUNhcnQiLCJnZXRBbGxCeVJvbGUiLCJ0b3RhbEl0ZW1RdWFudGl0eSIsImdldEFsbEJ5VGV4dCIsImRlY3JlYXNlUXVhbnRpdHkiLCJpbmNyZWFzZVF1YW50aXR5IiwicmVzZXRRdWFudGl0eSIsInJlbW92ZUFsbEJ1dHRvbiIsImdldEJ5VGVzdElkIiwidG9CZUZhbHN5IiwiZXJyb3IiXSwic291cmNlcyI6WyJiYXNlLnN0ZXBzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVGZWF0dXJlLCBsb2FkRmVhdHVyZSB9IGZyb20gXCJqZXN0LWN1Y3VtYmVyXCI7XHJcbmltcG9ydCB7IGNsZWFudXAsIGZpcmVFdmVudCwgcmVuZGVyLCB3YWl0Rm9yIH0gZnJvbSBcIkB0ZXN0aW5nLWxpYnJhcnkvcmVhY3RcIjtcclxuaW1wb3J0IEJhc2UgZnJvbSBcIi4uLy4uL0Jhc2VcIjtcclxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgXCJ0ZXh0LWVuY29kaW5nXCI7XHJcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XHJcbmltcG9ydCB7IGNvbmZpZ3VyZVN0b3JlIH0gZnJvbSBcIkByZWR1eGpzL3Rvb2xraXRcIjtcclxuaW1wb3J0IHsgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlcywgUm91dGUgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgY2FydFNsaWNlIGZyb20gXCIuLi8uLi9yZWR1eC9yZWR1Y2VyL2NhcnRTbGljZVwiO1xyXG5pbXBvcnQgeyBhY3QgfSBmcm9tIFwicmVhY3QtZG9tL3Rlc3QtdXRpbHNcIjtcclxuY29uc3QgZmVhdHVyZSA9IGxvYWRGZWF0dXJlKFwic3JjL2NvbXBvbmVudHMvZmVhdHVyZXMvYmFzZS5mZWF0dXJlXCIpO1xyXG5cclxubGV0IHN0b3JlOiBhbnk7XHJcbmxldCBzY3JlZW46IGFueTtcclxuXHJcbmRlZmluZUZlYXR1cmUoZmVhdHVyZSwgKHRlc3QpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIHN0b3JlID0gY29uZmlndXJlU3RvcmUoe1xyXG4gICAgICByZWR1Y2VyOiB7XHJcbiAgICAgICAgY2FydDogY2FydFNsaWNlLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBzY3JlZW4gPSByZW5kZXIoXHJcbiAgICAgIDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxyXG4gICAgICAgIDxCYXNlIC8+XHJcbiAgICAgIDwvUHJvdmlkZXI+XHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KFwiQWRkaW5nIGEgbmV3IGl0ZW0gdG8gdGhlIGNhcnRcIiwgKHsgZ2l2ZW4sIHdoZW4sIHRoZW4sIGFuZCB9KSA9PiB7XHJcbiAgICBnaXZlbihcInRoZSB1c2VyIGlzIG9uIHRoZSBjYXJ0IHBhZ2VcIiwgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2NyZWVuKS50b0JlVHJ1dGh5KCk7XHJcbiAgICB9KTtcclxuICAgIHdoZW4oJ3RoZSB1c2VyIGNsaWNrcyB0aGUgXCJBZGQgTmV3IEl0ZW1cIiBidXR0b24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRCeVRleHQoXCI1XCIpO1xyXG4gICAgICBleHBlY3QoaXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIGNvbnN0IGFkZENhcnQgPSBzY3JlZW4uZ2V0QnlSb2xlKFwiYnV0dG9uXCIsIHsgbmFtZTogXCJhZGQtdG8tY2FydFwiIH0pO1xyXG4gICAgICBhY3QoKCkgPT4ge1xyXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhhZGRDYXJ0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoZW4oXCJhIG5ldyBpdGVtIHNob3VsZCBiZSBhZGRlZCB0byB0aGUgY2FydFwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRCeVRleHQoXCI2XCIpO1xyXG4gICAgICAgIGV4cGVjdChpdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICB0ZXN0KFwiRGVsZXRpbmcgYW4gaXRlbSBmcm9tIHRoZSBjYXJ0XCIsICh7IGdpdmVuLCB3aGVuLCB0aGVuLCBhbmQgfSkgPT4ge1xyXG4gICAgZ2l2ZW4oXCJ0aGUgdXNlciBpcyBvbiB0aGUgY2FydCBwYWdlXCIsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNjcmVlbikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gICAgd2hlbigndGhlIHVzZXIgY2xpY2tzIHRoZSBcIkRlbGV0ZVwiIGJ1dHRvbiBmb3IgYW4gaXRlbScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEJ5VGV4dChcIjVcIik7XHJcbiAgICAgIGV4cGVjdChpdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgY29uc3QgcmVtb3ZlQ2FydCA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoXCJidXR0b25cIiwge1xyXG4gICAgICAgIG5hbWU6IFwicmVtb3ZlLWNhcnQtYnV0dG9uXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhY3QoKCkgPT4ge1xyXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhyZW1vdmVDYXJ0WzRdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoZW4oXHJcbiAgICAgIFwidGhlIHRvdGFsIHF1YW50aXR5IHNob3VsZCBkZWNyZWFzZSBieSB0aGUgcXVhbnRpdHkgb2YgdGhlIGRlbGV0ZWQgaXRlbVwiLFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiNFwiKTtcclxuICAgICAgICAgIGV4cGVjdChpdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9KTtcclxuICB0ZXN0KFwiUmVtb3ZpbmcgYW4gaXRlbSBmcm9tIHRoZSBjYXJ0XCIsICh7IGdpdmVuLCB3aGVuLCB0aGVuLCBhbmQgfSkgPT4ge1xyXG4gICAgZ2l2ZW4oXCJ0aGUgdXNlciBpcyBvbiB0aGUgY2FydCBwYWdlXCIsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNjcmVlbikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gICAgd2hlbigndGhlIHVzZXIgY2xpY2tzIHRoZSBcIlJlbW92ZVwiIGJ1dHRvbiBmb3IgYW4gaXRlbScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdG90YWxJdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiNVwiKTtcclxuICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEFsbEJ5VGV4dChcIjFcIik7XHJcblxyXG4gICAgICBleHBlY3QodG90YWxJdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgY29uc3QgZGVjcmVhc2VRdWFudGl0eSA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoXCJidXR0b25cIiwge1xyXG4gICAgICAgIG5hbWU6IFwiZGVjcmVhc2UtaXRlbS1xdWFudGl0eVwiLFxyXG4gICAgICB9KTtcclxuICAgICAgYWN0KCgpID0+IHtcclxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soZGVjcmVhc2VRdWFudGl0eVs0XSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGVuKFwidGhlIHRvdGFsIHF1YW50aXR5IHNob3VsZCBkZWNyZWFzZSBieSAxXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEJ5VGV4dChcIlplcm9cIik7XHJcbiAgICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eSkudG9CZVRydXRoeSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIHRlc3QoXCJBZGRpbmcgYW4gaXRlbSB0byB0aGUgY2FydFwiLCAoeyBnaXZlbiwgd2hlbiwgdGhlbiB9KSA9PiB7XHJcbiAgICBnaXZlbihcInRoZSB1c2VyIGlzIG9uIHRoZSBjYXJ0IHBhZ2VcIiwgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2NyZWVuKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgICB3aGVuKCd0aGUgdXNlciBjbGlja3MgdGhlIFwiQWRkIHRvIENhcnRcIiBidXR0b24gZm9yIGFuIGl0ZW0nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRvdGFsSXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEJ5VGV4dChcIjVcIik7XHJcbiAgICAgIGNvbnN0IGl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRBbGxCeVRleHQoXCIxXCIpO1xyXG5cclxuICAgICAgZXhwZWN0KHRvdGFsSXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIGV4cGVjdChpdGVtUXVhbnRpdHlbMF0pLnRvQmVUcnV0aHkoKTtcclxuICAgICAgY29uc3QgaW5jcmVhc2VRdWFudGl0eSA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoXCJidXR0b25cIiwge1xyXG4gICAgICAgIG5hbWU6IFwiaW5jcmVhc2UtaXRlbS1xdWFudGl0eVwiLFxyXG4gICAgICB9KTtcclxuICAgICAgYWN0KCgpID0+IHtcclxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soaW5jcmVhc2VRdWFudGl0eVswXSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGVuKFwidGhlIHRvdGFsIHF1YW50aXR5IHNob3VsZCBpbmNyZWFzZSBieSAxXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEJ5VGV4dChcIjJcIik7XHJcbiAgICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eSkudG9CZVRydXRoeSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIHRlc3QoXCJSZXNldHRpbmcgdGhlIGNhcnQgY291bnRlclwiLCAoeyBnaXZlbiwgd2hlbiwgdGhlbiB9KSA9PiB7XHJcbiAgICBnaXZlbihcInRoZSB1c2VyIGlzIG9uIHRoZSBjYXJ0IHBhZ2VcIiwgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2NyZWVuKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgICB3aGVuKCd0aGUgdXNlciBjbGlja3MgdGhlIFwiUmVzZXQgQ291bnRlclwiIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdG90YWxJdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiNVwiKTtcclxuICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEFsbEJ5VGV4dChcIjFcIik7XHJcblxyXG4gICAgICBleHBlY3QodG90YWxJdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eVswXSkudG9CZVRydXRoeSgpO1xyXG4gICAgICBjb25zdCByZXNldFF1YW50aXR5ID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgbmFtZTogXCJyZXNldC1idXR0b25cIixcclxuICAgICAgfSk7XHJcbiAgICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHJlc2V0UXVhbnRpdHkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhlbihcInRoZSB0b3RhbCBxdWFudGl0eSBzaG91bGQgYmUgc2V0IHRvIDBcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KFwiMFwiKTtcclxuICAgICAgICBleHBlY3QoaXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgdGVzdChcIlJlbW92aW5nIGFsbCBpdGVtcyBmcm9tIHRoZSBjYXJ0XCIsICh7IGdpdmVuLCB3aGVuLCB0aGVuIH0pID0+IHtcclxuICAgIGdpdmVuKFwidGhlIHVzZXIgaXMgb24gdGhlIGNhcnQgcGFnZVwiLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JlZW4pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICAgIHdoZW4oJ3RoZSB1c2VyIGNsaWNrcyB0aGUgXCJSZW1vdmUgQWxsIEl0ZW1zXCIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0b3RhbEl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRCeVRleHQoXCI1XCIpO1xyXG4gICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KFwiMVwiKTtcclxuICAgICAgZXhwZWN0KHRvdGFsSXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIGV4cGVjdChpdGVtUXVhbnRpdHlbMF0pLnRvQmVUcnV0aHkoKTtcclxuICAgICAgY29uc3QgcmVtb3ZlQWxsQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgbmFtZTogXCJyZW1vdmUtYWxsLWJ1dHRvblwiLFxyXG4gICAgICB9KTtcclxuICAgICAgYWN0KCgpID0+IHtcclxuICAgICAgICBmaXJlRXZlbnQuY2xpY2socmVtb3ZlQWxsQnV0dG9uKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoZW4oXCJ0aGUgY2FydCBzaG91bGQgYmUgZW1wdHlcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgc2NyZWVuLmdldEJ5VGVzdElkKFwiaXRlbXMtY29udGFpbmVyXCIpO1xyXG4gICAgICAgICAgZXhwZWN0KHRydWUpLnRvQmVGYWxzeSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLGFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUQsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBQSxPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBTCxP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