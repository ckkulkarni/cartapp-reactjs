e29c11ad7964b3eba55a1d0c20f8f46e
"use strict";

var _jestCucumber = require("jest-cucumber");
var _react = require("@testing-library/react");
var _Base = _interopRequireDefault(require("../../Base"));
var _react2 = _interopRequireDefault(require("react"));
require("text-encoding");
var _reactRedux = require("react-redux");
var _toolkit = require("@reduxjs/toolkit");
var _cartSlice = _interopRequireDefault(require("../../redux/reducer/cartSlice"));
var _testUtils = require("react-dom/test-utils");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const feature = (0, _jestCucumber.loadFeature)("src/components/features/base.feature");
let store;
let screen;
(0, _jestCucumber.defineFeature)(feature, test => {
  beforeEach(() => {
    store = (0, _toolkit.configureStore)({
      reducer: {
        cart: _cartSlice.default
      }
    });
    screen = (0, _react.render)( /*#__PURE__*/_react2.default.createElement(_reactRedux.Provider, {
      store: store
    }, /*#__PURE__*/_react2.default.createElement(_Base.default, null)));
  });
  test("Adding a new item to the cart", ({
    given,
    when,
    then,
    and
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeTruthy();
    });
    when('the user clicks the "Add New Item" button', () => {
      const itemQuantity = screen.getByText("5");
      expect(itemQuantity).toBeTruthy();
      const addCart = screen.getByRole("button", {
        name: "add-to-cart"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(addCart);
      });
    });
    then("a new item should be added to the cart", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("6");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Deleting an item from the cart", ({
    given,
    when,
    then,
    and
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Delete" button for an item', async () => {
      const itemQuantity = screen.getByText("5");
      expect(itemQuantity).toBeTruthy();
      const removeCart = screen.getAllByRole("button", {
        name: "remove-cart-button"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(removeCart[4]);
      });
    });
    then("the total quantity should decrease by the quantity of the deleted item", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("4");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Removing an item from the cart", ({
    given,
    when,
    then,
    and
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Remove" button for an item', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      const decreaseQuantity = screen.getAllByRole("button", {
        name: "decrease-item-quantity"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(decreaseQuantity[4]);
      });
    });
    then("the total quantity should decrease by 1", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("Zero");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Adding an item to the cart", ({
    given,
    when,
    then
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Add to Cart" button for an item', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      expect(itemQuantity[0]).toBeTruthy();
      const increaseQuantity = screen.getAllByRole("button", {
        name: "increase-item-quantity"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(increaseQuantity[0]);
      });
    });
    then("the total quantity should increase by 1", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("2");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Resetting the cart counter", ({
    given,
    when,
    then
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Reset Counter" button', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      expect(itemQuantity[0]).toBeTruthy();
      const resetQuantity = screen.getByRole("button", {
        name: "reset-button"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(resetQuantity);
      });
    });
    then("the total quantity should be set to 0", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getAllByText("0");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Removing all items from the cart", ({
    given,
    when,
    then
  }) => {
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
    when('the user clicks the "Remove All Items" button', async () => {
      const totalItemQuantity = screen.getByText("5");
      const itemQuantity = screen.getAllByText("1");
      expect(totalItemQuantity).toBeTruthy();
      expect(itemQuantity[0]).toBeTruthy();
      const removeAllButton = screen.getByRole("button", {
        name: "remove-all-button"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(removeAllButton);
      });
    });
    then("the cart should be empty", async () => {
      await (0, _react.waitFor)(() => {
        try {
          const itemsContainer = screen.getByTestId("items-container");
          expect(itemsContainer).toBeFalsy();
        } catch (error) {
          expect(error).toBeDefined();
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfamVzdEN1Y3VtYmVyIiwicmVxdWlyZSIsIl9yZWFjdCIsIl9CYXNlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9yZWFjdDIiLCJfcmVhY3RSZWR1eCIsIl90b29sa2l0IiwiX2NhcnRTbGljZSIsIl90ZXN0VXRpbHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImZlYXR1cmUiLCJsb2FkRmVhdHVyZSIsInN0b3JlIiwic2NyZWVuIiwiZGVmaW5lRmVhdHVyZSIsInRlc3QiLCJiZWZvcmVFYWNoIiwiY29uZmlndXJlU3RvcmUiLCJyZWR1Y2VyIiwiY2FydCIsImNhcnRTbGljZSIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJQcm92aWRlciIsImdpdmVuIiwid2hlbiIsInRoZW4iLCJhbmQiLCJleHBlY3QiLCJ0b0JlVHJ1dGh5IiwiaXRlbVF1YW50aXR5IiwiZ2V0QnlUZXh0IiwiYWRkQ2FydCIsImdldEJ5Um9sZSIsIm5hbWUiLCJhY3QiLCJmaXJlRXZlbnQiLCJjbGljayIsIndhaXRGb3IiLCJ0b0JlRGVmaW5lZCIsInJlbW92ZUNhcnQiLCJnZXRBbGxCeVJvbGUiLCJ0b3RhbEl0ZW1RdWFudGl0eSIsImdldEFsbEJ5VGV4dCIsImRlY3JlYXNlUXVhbnRpdHkiLCJpbmNyZWFzZVF1YW50aXR5IiwicmVzZXRRdWFudGl0eSIsInJlbW92ZUFsbEJ1dHRvbiIsIml0ZW1zQ29udGFpbmVyIiwiZ2V0QnlUZXN0SWQiLCJ0b0JlRmFsc3kiLCJlcnJvciJdLCJzb3VyY2VzIjpbImJhc2Uuc3RlcHMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZUZlYXR1cmUsIGxvYWRGZWF0dXJlIH0gZnJvbSBcImplc3QtY3VjdW1iZXJcIjtcclxuaW1wb3J0IHsgY2xlYW51cCwgZmlyZUV2ZW50LCByZW5kZXIsIHdhaXRGb3IgfSBmcm9tIFwiQHRlc3RpbmctbGlicmFyeS9yZWFjdFwiO1xyXG5pbXBvcnQgQmFzZSBmcm9tIFwiLi4vLi4vQmFzZVwiO1xyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBcInRleHQtZW5jb2RpbmdcIjtcclxuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcclxuaW1wb3J0IHsgY29uZmlndXJlU3RvcmUgfSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xyXG5pbXBvcnQgeyBCcm93c2VyUm91dGVyIGFzIFJvdXRlciwgUm91dGVzLCBSb3V0ZSB9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XHJcbmltcG9ydCBjYXJ0U2xpY2UgZnJvbSBcIi4uLy4uL3JlZHV4L3JlZHVjZXIvY2FydFNsaWNlXCI7XHJcbmltcG9ydCB7IGFjdCB9IGZyb20gXCJyZWFjdC1kb20vdGVzdC11dGlsc1wiO1xyXG5jb25zdCBmZWF0dXJlID0gbG9hZEZlYXR1cmUoXCJzcmMvY29tcG9uZW50cy9mZWF0dXJlcy9iYXNlLmZlYXR1cmVcIik7XHJcblxyXG5sZXQgc3RvcmU6IGFueTtcclxubGV0IHNjcmVlbjogYW55O1xyXG5cclxuZGVmaW5lRmVhdHVyZShmZWF0dXJlLCAodGVzdCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XHJcbiAgICAgIHJlZHVjZXI6IHtcclxuICAgICAgICBjYXJ0OiBjYXJ0U2xpY2UsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIHNjcmVlbiA9IHJlbmRlcihcclxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XHJcbiAgICAgICAgPEJhc2UgLz5cclxuICAgICAgPC9Qcm92aWRlcj5cclxuICAgICk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoXCJBZGRpbmcgYSBuZXcgaXRlbSB0byB0aGUgY2FydFwiLCAoeyBnaXZlbiwgd2hlbiwgdGhlbiwgYW5kIH0pID0+IHtcclxuICAgIGdpdmVuKFwidGhlIHVzZXIgaXMgb24gdGhlIGNhcnQgcGFnZVwiLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JlZW4pLnRvQmVUcnV0aHkoKTtcclxuICAgIH0pO1xyXG4gICAgd2hlbigndGhlIHVzZXIgY2xpY2tzIHRoZSBcIkFkZCBOZXcgSXRlbVwiIGJ1dHRvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEJ5VGV4dChcIjVcIik7XHJcbiAgICAgIGV4cGVjdChpdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgY29uc3QgYWRkQ2FydCA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiBcImFkZC10by1jYXJ0XCIgfSk7XHJcbiAgICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZENhcnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhlbihcImEgbmV3IGl0ZW0gc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBjYXJ0XCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEJ5VGV4dChcIjZcIik7XHJcbiAgICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eSkudG9CZVRydXRoeSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIHRlc3QoXCJEZWxldGluZyBhbiBpdGVtIGZyb20gdGhlIGNhcnRcIiwgKHsgZ2l2ZW4sIHdoZW4sIHRoZW4sIGFuZCB9KSA9PiB7XHJcbiAgICBnaXZlbihcInRoZSB1c2VyIGlzIG9uIHRoZSBjYXJ0IHBhZ2VcIiwgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2NyZWVuKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgICB3aGVuKCd0aGUgdXNlciBjbGlja3MgdGhlIFwiRGVsZXRlXCIgYnV0dG9uIGZvciBhbiBpdGVtJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiNVwiKTtcclxuICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eSkudG9CZVRydXRoeSgpO1xyXG4gICAgICBjb25zdCByZW1vdmVDYXJ0ID0gc2NyZWVuLmdldEFsbEJ5Um9sZShcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgbmFtZTogXCJyZW1vdmUtY2FydC1idXR0b25cIixcclxuICAgICAgfSk7XHJcbiAgICAgIGFjdCgoKSA9PiB7XHJcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHJlbW92ZUNhcnRbNF0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhlbihcclxuICAgICAgXCJ0aGUgdG90YWwgcXVhbnRpdHkgc2hvdWxkIGRlY3JlYXNlIGJ5IHRoZSBxdWFudGl0eSBvZiB0aGUgZGVsZXRlZCBpdGVtXCIsXHJcbiAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRCeVRleHQoXCI0XCIpO1xyXG4gICAgICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eSkudG9CZVRydXRoeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0pO1xyXG4gIHRlc3QoXCJSZW1vdmluZyBhbiBpdGVtIGZyb20gdGhlIGNhcnRcIiwgKHsgZ2l2ZW4sIHdoZW4sIHRoZW4sIGFuZCB9KSA9PiB7XHJcbiAgICBnaXZlbihcInRoZSB1c2VyIGlzIG9uIHRoZSBjYXJ0IHBhZ2VcIiwgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2NyZWVuKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgICB3aGVuKCd0aGUgdXNlciBjbGlja3MgdGhlIFwiUmVtb3ZlXCIgYnV0dG9uIGZvciBhbiBpdGVtJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0b3RhbEl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRCeVRleHQoXCI1XCIpO1xyXG4gICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KFwiMVwiKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0b3RhbEl0ZW1RdWFudGl0eSkudG9CZVRydXRoeSgpO1xyXG4gICAgICBjb25zdCBkZWNyZWFzZVF1YW50aXR5ID0gc2NyZWVuLmdldEFsbEJ5Um9sZShcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgbmFtZTogXCJkZWNyZWFzZS1pdGVtLXF1YW50aXR5XCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhY3QoKCkgPT4ge1xyXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhkZWNyZWFzZVF1YW50aXR5WzRdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoZW4oXCJ0aGUgdG90YWwgcXVhbnRpdHkgc2hvdWxkIGRlY3JlYXNlIGJ5IDFcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiWmVyb1wiKTtcclxuICAgICAgICBleHBlY3QoaXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgdGVzdChcIkFkZGluZyBhbiBpdGVtIHRvIHRoZSBjYXJ0XCIsICh7IGdpdmVuLCB3aGVuLCB0aGVuIH0pID0+IHtcclxuICAgIGdpdmVuKFwidGhlIHVzZXIgaXMgb24gdGhlIGNhcnQgcGFnZVwiLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JlZW4pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICAgIHdoZW4oJ3RoZSB1c2VyIGNsaWNrcyB0aGUgXCJBZGQgdG8gQ2FydFwiIGJ1dHRvbiBmb3IgYW4gaXRlbScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdG90YWxJdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiNVwiKTtcclxuICAgICAgY29uc3QgaXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEFsbEJ5VGV4dChcIjFcIik7XHJcblxyXG4gICAgICBleHBlY3QodG90YWxJdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eVswXSkudG9CZVRydXRoeSgpO1xyXG4gICAgICBjb25zdCBpbmNyZWFzZVF1YW50aXR5ID0gc2NyZWVuLmdldEFsbEJ5Um9sZShcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgbmFtZTogXCJpbmNyZWFzZS1pdGVtLXF1YW50aXR5XCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhY3QoKCkgPT4ge1xyXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhpbmNyZWFzZVF1YW50aXR5WzBdKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoZW4oXCJ0aGUgdG90YWwgcXVhbnRpdHkgc2hvdWxkIGluY3JlYXNlIGJ5IDFcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiMlwiKTtcclxuICAgICAgICBleHBlY3QoaXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgdGVzdChcIlJlc2V0dGluZyB0aGUgY2FydCBjb3VudGVyXCIsICh7IGdpdmVuLCB3aGVuLCB0aGVuIH0pID0+IHtcclxuICAgIGdpdmVuKFwidGhlIHVzZXIgaXMgb24gdGhlIGNhcnQgcGFnZVwiLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JlZW4pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICAgIHdoZW4oJ3RoZSB1c2VyIGNsaWNrcyB0aGUgXCJSZXNldCBDb3VudGVyXCIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0b3RhbEl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRCeVRleHQoXCI1XCIpO1xyXG4gICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KFwiMVwiKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0b3RhbEl0ZW1RdWFudGl0eSkudG9CZVRydXRoeSgpO1xyXG4gICAgICBleHBlY3QoaXRlbVF1YW50aXR5WzBdKS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIGNvbnN0IHJlc2V0UXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlSb2xlKFwiYnV0dG9uXCIsIHtcclxuICAgICAgICBuYW1lOiBcInJlc2V0LWJ1dHRvblwiLFxyXG4gICAgICB9KTtcclxuICAgICAgYWN0KCgpID0+IHtcclxuICAgICAgICBmaXJlRXZlbnQuY2xpY2socmVzZXRRdWFudGl0eSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGVuKFwidGhlIHRvdGFsIHF1YW50aXR5IHNob3VsZCBiZSBzZXQgdG8gMFwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRBbGxCeVRleHQoXCIwXCIpO1xyXG4gICAgICAgIGV4cGVjdChpdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICB0ZXN0KFwiUmVtb3ZpbmcgYWxsIGl0ZW1zIGZyb20gdGhlIGNhcnRcIiwgKHsgZ2l2ZW4sIHdoZW4sIHRoZW4gfSkgPT4ge1xyXG4gICAgZ2l2ZW4oXCJ0aGUgdXNlciBpcyBvbiB0aGUgY2FydCBwYWdlXCIsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNjcmVlbikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gICAgd2hlbigndGhlIHVzZXIgY2xpY2tzIHRoZSBcIlJlbW92ZSBBbGwgSXRlbXNcIiBidXR0b24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRvdGFsSXRlbVF1YW50aXR5ID0gc2NyZWVuLmdldEJ5VGV4dChcIjVcIik7XHJcbiAgICAgIGNvbnN0IGl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRBbGxCeVRleHQoXCIxXCIpO1xyXG4gICAgICBleHBlY3QodG90YWxJdGVtUXVhbnRpdHkpLnRvQmVUcnV0aHkoKTtcclxuICAgICAgZXhwZWN0KGl0ZW1RdWFudGl0eVswXSkudG9CZVRydXRoeSgpO1xyXG4gICAgICBjb25zdCByZW1vdmVBbGxCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKFwiYnV0dG9uXCIsIHtcclxuICAgICAgICBuYW1lOiBcInJlbW92ZS1hbGwtYnV0dG9uXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhY3QoKCkgPT4ge1xyXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhyZW1vdmVBbGxCdXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhlbihcInRoZSBjYXJ0IHNob3VsZCBiZSBlbXB0eVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtc0NvbnRhaW5lciA9IHNjcmVlbi5nZXRCeVRlc3RJZChcIml0ZW1zLWNvbnRhaW5lclwiKTtcclxuICAgICAgICAgIGV4cGVjdChpdGVtc0NvbnRhaW5lcikudG9CZUZhbHN5KCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGV4cGVjdChlcnJvcikudG9CZURlZmluZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsS0FBQSxHQUFBQyxzQkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQUksT0FBQSxHQUFBRCxz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