458471b8681663931a29dae1ff16e6c9
"use strict";

var _jestCucumber = require("jest-cucumber");
var _react = require("@testing-library/react");
var _Base = _interopRequireDefault(require("../../Base"));
var _react2 = _interopRequireDefault(require("react"));
require("text-encoding");
var _reactRedux = require("react-redux");
var _toolkit = require("@reduxjs/toolkit");
var _reactRouterDom = require("react-router-dom");
var _cartSlice = _interopRequireDefault(require("../../redux/reducer/cartSlice"));
var _testUtils = require("react-dom/test-utils");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const feature = (0, _jestCucumber.loadFeature)("src/components/features/base.feature");
let store;
(0, _jestCucumber.defineFeature)(feature, test => {
  afterEach(() => {
    document.getElementsByTagName("html")[0].innerHTML = "";
  });
  test("Adding an item to the cart", ({
    given,
    when,
    then,
    and
  }) => {
    store = (0, _toolkit.configureStore)({
      reducer: {
        cart: _cartSlice.default
      }
    });
    const screen = (0, _react.render)( /*#__PURE__*/_react2.default.createElement(_reactRedux.Provider, {
      store: store
    }, /*#__PURE__*/_react2.default.createElement(_reactRouterDom.BrowserRouter, null, /*#__PURE__*/_react2.default.createElement(_reactRouterDom.Routes, null, /*#__PURE__*/_react2.default.createElement(_reactRouterDom.Route, {
      path: "/",
      element: /*#__PURE__*/_react2.default.createElement(_Base.default, null)
    })))));
    given("the user is on the cart page", () => {
      expect(screen).toBeTruthy();
    });
    when('the user clicks the "Add to Cart" button for an item', () => {
      const itemQuantity = screen.getByText("5");
      expect(itemQuantity).toBeTruthy();
      const addCart = screen.getByRole("button", {
        name: "add-to-cart"
      });
      (0, _testUtils.act)(() => {
        _react.fireEvent.click(addCart);
      });
    });
    then("the total quantity should increase by 1", async () => {
      await (0, _react.waitFor)(() => {
        const itemQuantity = screen.getByText("6");
        expect(itemQuantity).toBeTruthy();
      });
    });
  });
  test("Removing an item from the cart", ({
    given,
    when,
    then,
    and
  }) => {
    store = (0, _toolkit.configureStore)({
      reducer: {
        cart: _cartSlice.default
      }
    });
    const screen = (0, _react.render)( /*#__PURE__*/_react2.default.createElement(_reactRedux.Provider, {
      store: store
    }, /*#__PURE__*/_react2.default.createElement(_reactRouterDom.BrowserRouter, null, /*#__PURE__*/_react2.default.createElement(_reactRouterDom.Routes, null, /*#__PURE__*/_react2.default.createElement(_reactRouterDom.Route, {
      path: "/",
      element: /*#__PURE__*/_react2.default.createElement(_Base.default, null)
    })))));
    given("the user is on the cart page", () => {
      expect(screen).toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfamVzdEN1Y3VtYmVyIiwicmVxdWlyZSIsIl9yZWFjdCIsIl9CYXNlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9yZWFjdDIiLCJfcmVhY3RSZWR1eCIsIl90b29sa2l0IiwiX3JlYWN0Um91dGVyRG9tIiwiX2NhcnRTbGljZSIsIl90ZXN0VXRpbHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImZlYXR1cmUiLCJsb2FkRmVhdHVyZSIsInN0b3JlIiwiZGVmaW5lRmVhdHVyZSIsInRlc3QiLCJhZnRlckVhY2giLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5uZXJIVE1MIiwiZ2l2ZW4iLCJ3aGVuIiwidGhlbiIsImFuZCIsImNvbmZpZ3VyZVN0b3JlIiwicmVkdWNlciIsImNhcnQiLCJjYXJ0U2xpY2UiLCJzY3JlZW4iLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwiUHJvdmlkZXIiLCJCcm93c2VyUm91dGVyIiwiUm91dGVzIiwiUm91dGUiLCJwYXRoIiwiZWxlbWVudCIsImV4cGVjdCIsInRvQmVUcnV0aHkiLCJpdGVtUXVhbnRpdHkiLCJnZXRCeVRleHQiLCJhZGRDYXJ0IiwiZ2V0QnlSb2xlIiwibmFtZSIsImFjdCIsImZpcmVFdmVudCIsImNsaWNrIiwid2FpdEZvciIsInRvQmVEZWZpbmVkIl0sInNvdXJjZXMiOlsiYmFzZS5zdGVwcy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lRmVhdHVyZSwgbG9hZEZlYXR1cmUgfSBmcm9tIFwiamVzdC1jdWN1bWJlclwiO1xyXG5pbXBvcnQgeyBjbGVhbnVwLCBmaXJlRXZlbnQsIHJlbmRlciwgd2FpdEZvciB9IGZyb20gXCJAdGVzdGluZy1saWJyYXJ5L3JlYWN0XCI7XHJcbmltcG9ydCBCYXNlIGZyb20gXCIuLi8uLi9CYXNlXCI7XHJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IFwidGV4dC1lbmNvZGluZ1wiO1xyXG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xyXG5pbXBvcnQgeyBjb25maWd1cmVTdG9yZSB9IGZyb20gXCJAcmVkdXhqcy90b29sa2l0XCI7XHJcbmltcG9ydCB7IEJyb3dzZXJSb3V0ZXIgYXMgUm91dGVyLCBSb3V0ZXMsIFJvdXRlIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IGNhcnRTbGljZSBmcm9tIFwiLi4vLi4vcmVkdXgvcmVkdWNlci9jYXJ0U2xpY2VcIjtcclxuaW1wb3J0IHsgYWN0IH0gZnJvbSBcInJlYWN0LWRvbS90ZXN0LXV0aWxzXCI7XHJcbmNvbnN0IGZlYXR1cmUgPSBsb2FkRmVhdHVyZShcInNyYy9jb21wb25lbnRzL2ZlYXR1cmVzL2Jhc2UuZmVhdHVyZVwiKTtcclxubGV0IHN0b3JlOiBhbnk7XHJcbmRlZmluZUZlYXR1cmUoZmVhdHVyZSwgKHRlc3QpID0+IHtcclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpWzBdLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgfSk7XHJcbiAgdGVzdChcIkFkZGluZyBhbiBpdGVtIHRvIHRoZSBjYXJ0XCIsICh7IGdpdmVuLCB3aGVuLCB0aGVuLCBhbmQgfSkgPT4ge1xyXG4gICAgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XHJcbiAgICAgIHJlZHVjZXI6IHtcclxuICAgICAgICBjYXJ0OiBjYXJ0U2xpY2UsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHNjcmVlbiA9IHJlbmRlcihcclxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XHJcbiAgICAgICAgPFJvdXRlcj5cclxuICAgICAgICAgIDxSb3V0ZXM+XHJcbiAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL1wiIGVsZW1lbnQ9ezxCYXNlIC8+fSAvPlxyXG4gICAgICAgICAgPC9Sb3V0ZXM+XHJcbiAgICAgICAgPC9Sb3V0ZXI+XHJcbiAgICAgIDwvUHJvdmlkZXI+XHJcbiAgICApO1xyXG4gICAgZ2l2ZW4oXCJ0aGUgdXNlciBpcyBvbiB0aGUgY2FydCBwYWdlXCIsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNjcmVlbikudG9CZVRydXRoeSgpO1xyXG4gICAgfSk7XHJcbiAgICB3aGVuKCd0aGUgdXNlciBjbGlja3MgdGhlIFwiQWRkIHRvIENhcnRcIiBidXR0b24gZm9yIGFuIGl0ZW0nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW1RdWFudGl0eSA9IHNjcmVlbi5nZXRCeVRleHQoXCI1XCIpO1xyXG4gICAgICBleHBlY3QoaXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIGNvbnN0IGFkZENhcnQgPSBzY3JlZW4uZ2V0QnlSb2xlKFwiYnV0dG9uXCIsIHsgbmFtZTogXCJhZGQtdG8tY2FydFwiIH0pO1xyXG4gICAgICBhY3QoKCkgPT4ge1xyXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhhZGRDYXJ0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoZW4oXCJ0aGUgdG90YWwgcXVhbnRpdHkgc2hvdWxkIGluY3JlYXNlIGJ5IDFcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtUXVhbnRpdHkgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiNlwiKTtcclxuICAgICAgICBleHBlY3QoaXRlbVF1YW50aXR5KS50b0JlVHJ1dGh5KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgdGVzdChcIlJlbW92aW5nIGFuIGl0ZW0gZnJvbSB0aGUgY2FydFwiLCAoeyBnaXZlbiwgd2hlbiwgdGhlbiwgYW5kIH0pID0+IHtcclxuICAgIHN0b3JlID0gY29uZmlndXJlU3RvcmUoe1xyXG4gICAgICByZWR1Y2VyOiB7XHJcbiAgICAgICAgY2FydDogY2FydFNsaWNlLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBzY3JlZW4gPSByZW5kZXIoXHJcbiAgICAgIDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxyXG4gICAgICAgIDxSb3V0ZXI+XHJcbiAgICAgICAgICA8Um91dGVzPlxyXG4gICAgICAgICAgICA8Um91dGUgcGF0aD1cIi9cIiBlbGVtZW50PXs8QmFzZSAvPn0gLz5cclxuICAgICAgICAgIDwvUm91dGVzPlxyXG4gICAgICAgIDwvUm91dGVyPlxyXG4gICAgICA8L1Byb3ZpZGVyPlxyXG4gICAgKTtcclxuICAgIGdpdmVuKFwidGhlIHVzZXIgaXMgb24gdGhlIGNhcnQgcGFnZVwiLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JlZW4pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxhQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFELHNCQUFBLENBQUFILE9BQUE7QUFDQUEsT0FBQTtBQUNBLElBQUFLLFdBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFFBQUEsR0FBQU4sT0FBQTtBQUNBLElBQUFPLGVBQUEsR0FBQVAsT0FBQTtBQUNBLElBQUFRLFVBQUEsR0FBQUwsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFTLFVBQUEsR0FBQVQsT0FBQTtBQUEyQyxTQUFBRyx1QkFBQU8sR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUMzQyxNQUFNRyxPQUFPLEdBQUcsSUFBQUMseUJBQVcsRUFBQyxzQ0FBc0MsQ0FBQztBQUNuRSxJQUFJQyxLQUFVO0FBQ2QsSUFBQUMsMkJBQWEsRUFBQ0gsT0FBTyxFQUFHSSxJQUFJLElBQUs7RUFDL0JDLFNBQVMsQ0FBQyxNQUFNO0lBQ2RDLFFB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